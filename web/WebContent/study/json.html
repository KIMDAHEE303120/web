<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <table id='tbl' border="1"> </table>
    <script>
        let title = {
            id: 'ID',
            first_name: 'FIRST_NAME',
            last_name: 'LAST_NAME',
            email: 'EMAIL',
            gender: 'GENDER',
            ip_address: 'IP'
        };
        // let json =
        //     '[{"id":1,"first_name":"Yovonnda","last_name":"Chippendale","email":"ychippendale0@webeden.co.uk","gender":"Female","ip_address":"71.235.157.158"}, {"id":2,"first_name":"Amby","last_name":"Lamperd","email":"alamperd1@gov.uk","gender":"Polygender","ip_address":"5.191.65.137"}, {"id":3,"first_name":"Virgina","last_name":"Carsey","email":"vcarsey2@technorati.com","gender":"Non-binary","ip_address":"185.188.23.81"}, {"id":4,"first_name":"Nicky","last_name":"Maffulli","email":"nmaffulli3@mashable.com","gender":"Non-binary","ip_address":"31.159.35.119"}, {"id":5,"first_name":"Barnabas","last_name":"Olenichev","email":"bolenichev4@wikimedia.org","gender":"Female","ip_address":"238.215.24.210"}, {"id":6,"first_name":"Reggy","last_name":"Jeffs","email":"rjeffs5@sakura.ne.jp","gender":"Bigender","ip_address":"178.127.88.252"}, {"id":7,"first_name":"Georgette","last_name":"Sheahan","email":"gsheahan6@google.com","gender":"Genderfluid","ip_address":"216.187.232.240"}, {"id":8,"first_name":"Flynn","last_name":"Sarge","email":"fsarge7@hud.gov","gender":"Genderfluid","ip_address":"179.181.119.155"}, {"id":9,"first_name":"Ellette","last_name":"Riep","email":"eriep8@uiuc.edu","gender":"Non-binary","ip_address":"177.154.128.250"}, {"id":10,"first_name":"Van","last_name":"Hamner","email":"vhamner9@examiner.com","gender":"Agender","ip_address":"229.244.200.79"}, {"id":11,"first_name":"Dori","last_name":"Brookesbie","email":"dbrookesbiea@aboutads.info","gender":"Genderfluid","ip_address":"129.106.220.70"}, {"id":12,"first_name":"Zacharias","last_name":"Dalby","email":"zdalbyb@studiopress.com","gender":"Non-binary","ip_address":"250.28.84.74"},  {"id":13,"first_name":"Alissa","last_name":"Rentoll","email":"arentollc@state.tx.us","gender":"Bigender","ip_address":"89.47.127.223"}, {"id":14,"first_name":"Kerianne","last_name":"Dog","email":"kdogd@gravatar.com","gender":"Female","ip_address":"191.187.161.219"}, {"id":15,"first_name":"Marcellus","last_name":"Yaknov","email":"myaknove@4shared.com","gender":"Agender","ip_address":"193.82.170.104"}]';

        let json = [{
            id: 1,
            first_name: "Beulah",
            last_name: "Britee",
            email: "bbritee0@amazonaws.com",
            gender: "Male",
            ip_address: "35.154.246.112"
        }, {
            id: 2,
            first_name: "Chloette",
            last_name: "Ferenczi",
            email: "cferenczi1@printfriendly.com",
            gender: "Female",
            ip_address: "214.96.74.88"
        }, {
            id: 3,
            first_name: "Ginni",
            last_name: "Gabey",
            email: "ggabey2@weebly.com",
            gender: "Female",
            ip_address: "150.22.138.195"
        }, {
            id: 4,
            first_name: "Grace",
            last_name: "Jaulme",
            email: "gjaulme3@zdnet.com",
            gender: "Male",
            ip_address: "52.69.205.163"
        }, {
            id: 5,
            first_name: "Jose",
            last_name: "Gainseford",
            email: "jgainseford4@forbes.com",
            gender: "Genderqueer",
            ip_address: "118.17.1.232"
        }];

        console.log(json);


        let tbl, trTag, thTag, tdTag, text;

        tbl = document.getElementById('tbl');
        trTag = document.createElement('tr');
        tbl.appendChild(trTag);

        //체크박스(타이틀)
        let chk = document.createElement('input');
        chk.setAttribute('type', 'checkbox');
        chk.onchange = allCheck;
        thTag = document.createElement('th');
        trTag.appendChild(thTag);
        thTag.appendChild(chk);

        //타이틀
        for (titles in title) {
            thTag = document.createElement('th');
            text = document.createTextNode(title[titles]);
            trTag.appendChild(thTag);
            thTag.appendChild(text);
        };

        //버튼(타이틀)
        let btn = document.createElement('input');
        btn.setAttribute('type', 'button');
        btn.setAttribute('value', 'SELECTDEL');
        btn.onclick = delCheck;
        thTag = document.createElement('th')
        trTag.appendChild(thTag);
        thTag.appendChild(btn);


        //데이터 값 불러오기
        tbl.appendChild(trTag);

        for (value of json) {
            trTag = document.createElement('tr');

            //체크박스
            let chk = document.createElement('input');
            chk.setAttribute('type', 'checkbox');
            chk.onchange = allselect;
            tdTag = document.createElement('td');
            trTag.appendChild(tdTag);
            tdTag.appendChild(chk);
            // 데이터 값
            for (field in value) {
                tdTag = document.createElement('td');
                text = document.createTextNode(value[field]);
                tdTag.appendChild(text);
                trTag.appendChild(tdTag);
            }
            //버튼
            let btn = document.createElement('input');
            btn.setAttribute('type', 'button');
            btn.setAttribute('value', 'delete');
            btn.onclick = del;
            tdTag = document.createElement('td')
            trTag.appendChild(tdTag);
            tdTag.appendChild(btn);
            tbl.appendChild(trTag);
        };


        function del() {
            console.log(this.parentNode.parentNode.remove());
        }

        function allCheck() {
            let tChk = document.querySelector('th>input[type="checkbox"]');
            let checks = document.querySelectorAll('td>input[type="checkbox"]');
            for (let i = 0; i < checks.length; i++) {
                checks[i].checked = tChk.checked;
            }
        }

   
        function allselect() {
            // 전체 체크박스
            const checkboxes
                = document.querySelectorAll('td>input[type="checkbox"]');
            // 선택된 체크박스
            const checked
                = document.querySelectorAll('td>input[type="checkbox"]:checked');
            // select all 체크박스
            const selectAll
                = document.querySelector('th>input[type="checkbox"]');

            if (checkboxes.length === checked.length) {
                selectAll.checked = true;
            } else {
                selectAll.checked = false;
            }
        }


        function delCheck() {
            let checkAll = document.querySelectorAll('td>input[type="checkbox"]:checked');
            console.log(checkAll);
            for (let i = 0; i < checkAll.length; i++) {
                checkAll[i].parentNode.parentNode.remove();
            }
        }


    </script>
</body>

</html>